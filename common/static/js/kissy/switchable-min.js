/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Apr 12 21:10
*/
KISSY.add("switchable/accordion/aria",function(j,e,v,s,i){function x(k){var m;j.each(this.triggers,function(A){if(A==k||e.contains(A,k))m=A});return m}function u(k){var m;j.each(this.panels,function(A){if(A==k||e.contains(A,k))m=A});return m}function h(k){var m=x.call(this,k);if(!m){k=u.call(this,k);m=this.triggers[j.indexOf(k,this.panels)]}return m}function t(k){switch(k.keyCode){case w:case p:k.ctrlKey&&!k.altKey&&!k.shiftKey&&k.halt();break;case l:k.ctrlKey&&!k.altKey&&k.halt()}}function a(k){var m=
k.target,A=this.triggers,C=!k.ctrlKey&&!k.shiftKey&&!k.altKey,F=k.ctrlKey&&!k.shiftKey&&!k.altKey;switch(k.keyCode){case y:case r:if((m=x.call(this,m))&&C){this.switchTo(j.indexOf(m,this.triggers));k.halt()}break;case z:case n:if(m=x.call(this,m)){c.call(this,m);k.halt()}break;case B:case f:if(m=x.call(this,m)){d.call(this,m);k.halt()}break;case p:if(F){k.halt();m=h.call(this,m);d.call(this,m)}break;case w:if(F){k.halt();m=h.call(this,m);c.call(this,m)}break;case o:if(C){h.call(this,m);b.call(this,
0,true);k.halt()}break;case q:if(C){h.call(this,m);b.call(this,A.length-1,true);k.halt()}break;case l:if(k.ctrlKey&&!k.altKey){k.halt();m=h.call(this,m);k.shiftKey?c.call(this,m):d.call(this,m)}}}function b(k,m){var A=this.triggers,C=A[k];j.each(A,function(F){if(F!==C){E(F,"-1");e.removeClass(F,"ks-switchable-select");F.setAttribute("aria-selected","false")}});m&&C.focus();E(C,"0");e.addClass(C,"ks-switchable-select");C.setAttribute("aria-selected","true")}function c(k){var m=this.triggers;k=j.indexOf(k,
m);b.call(this,k==0?m.length-1:k-1,true)}function d(k){var m=this.triggers;k=j.indexOf(k,m);b.call(this,k==m.length-1?0:k+1,true)}function g(k){var m=!!(k.originalEvent.target||k.originalEvent.srcElement);k=k.currentIndex;var A=this.panels,C=this.triggers,F=C[k],G=A[k];if(!this.config.multiple){j.each(A,function(D){D!==G&&D.setAttribute("aria-hidden","true")});j.each(C,function(D){D!==F&&D.setAttribute("aria-hidden","true")})}A=G.getAttribute("aria-hidden");G.setAttribute("aria-hidden",A=="false"?
"true":"false");F.setAttribute("aria-expanded",A=="false"?"false":"true");b.call(this,k,m)}var w=33,p=34,q=35,o=36,z=37,n=38,B=39,f=40,l=9,r=32,y=13;j.mix(i.Config,{aria:true});i.Plugins.push({name:"aria",init:function(k){if(k.config.aria){var m=k.container,A=k.activeIndex;e.attr(m,"aria-multiselectable",k.config.multiple?"true":"false");k.nav&&e.attr(k.nav,"role","tablist");var C=k.triggers,F=k.panels,G=0;j.each(F,function(D){if(!D.id)D.id=j.guid("ks-accordion-tab-panel")});j.each(C,function(D){if(!D.id)D.id=
j.guid("ks-accordion-tab")});j.each(C,function(D){D.setAttribute("role","tab");D.setAttribute("aria-expanded",A==G?"true":"false");D.setAttribute("aria-selected",A==G?"true":"false");D.setAttribute("aria-controls",F[G].id);E(D,A==G?"0":"-1");G++});G=0;j.each(F,function(D){var H=C[G];D.setAttribute("role","tabpanel");D.setAttribute("aria-hidden",A==G?"false":"true");D.setAttribute("aria-labelledby",H.id);G++});k.on("switch",g,k);v.on(m,"keydown",a,k);v.on(m,"keypress",t,k)}}});var E=s.setTabIndex},
{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/accordion/base",function(j,e,v){function s(i,x){if(!(this instanceof s))return new s(i,x);s.superclass.constructor.apply(this,arguments)}j.extend(s,v,{_switchTrigger:function(i,x){var u=this.config;u.multiple?e.toggleClass(x,u.activeTriggerCls):s.superclass._switchTrigger.apply(this,arguments)},_triggerIsValid:function(i){return this.config.multiple||s.superclass._triggerIsValid.call(this,i)},_switchView:function(i,x,u,h,t,a,b){var c=x[0];if(this.config.multiple){e.toggle(c);
this._fireOnSwitch(u,h,a);b&&b.call(this)}else s.superclass._switchView.apply(this,arguments)}});s.Plugins=[];s.Config={markupType:1,triggerType:"click",multiple:false};return s},{requires:["dom","../base"]});
KISSY.add("switchable/aria",function(j,e,v,s){function i(){this.stop&&this.stop()}function x(){this.start&&this.start()}s.Plugins.push({name:"aria",init:function(h){if(h.config.aria){var t=h.container;v.on(t,"focusin",i,h);v.on(t,"focusout",x,h)}}});var u=["a","input","button","object"];return{setTabIndex:function(h,t){h.tabIndex=t;j.each(e.query("*",h),function(a){var b=a.nodeName.toLowerCase();if(j.inArray(b,u)){e.hasAttr(a,"oriTabIndex")||e.attr(a,"oriTabIndex",a.tabIndex);a.tabIndex=t!=-1?e.attr(a,
"oriTabIndex"):t}})}}},{requires:["dom","event","./base"]});
KISSY.add("switchable/autoplay",function(j,e,v,s,i){var x=j.Env.host,u=function(h){var t=e.scrollTop(),a=e.viewportHeight(),b=e.offset(h);h=e.height(h);return b.top>t&&b.top+h<t+a};j.mix(s.Config,{pauseOnScroll:false,autoplay:false,interval:5,pauseOnHover:true});s.Plugins.push({name:"autoplay",init:function(h){function t(){c=j.later(function(){h.paused||h.next()},b,true)}var a=h.config,b=a.interval*1E3,c;if(a.autoplay){if(a.pauseOnScroll){h.__scrollDetect=j.buffer(function(){h[u(h.container)?"start":
"stop"]()},200);v.on(x,"scroll",h.__scrollDetect)}t();h.stop=function(){if(c){c.cancel();c=i}h.paused=true};h.start=function(){if(c){c.cancel();c=i}h.paused=false;t()};if(a.pauseOnHover){v.on(h.container,"mouseenter",h.stop,h);v.on(h.container,"mouseleave",h.start,h)}}},destroy:function(h){h.__scrollDetect&&v.remove(x,"scroll",h.__scrollDetect)}});return s},{requires:["dom","event","./base"]});
KISSY.add("switchable/autorender",function(j,e,v,s){s.autoRender=function(i,x){i="."+(i||"KS_Widget");j.each(e.query(i,x),function(u){var h=u.getAttribute("data-widget-type"),t;if(h&&"Switchable Tabs Slide Carousel Accordion".indexOf(h)>-1)try{if(t=u.getAttribute("data-widget-config"))t=t.replace(/'/g,'"');new (h=="Switchable"?s:s[h])(u,v.parse(t))}catch(a){}})}},{requires:["dom","json","./base"]});
KISSY.add("switchable/base",function(j,e,v,s){function i(a,b){b=b||{};if(!("markupType"in b))if(b.panelCls)b.markupType=1;else if(b.panels)b.markupType=2;for(var c=this.constructor;c;){b=j.merge(c.Config,b);c=c.superclass?c.superclass.constructor:null}this.container=e.get(a);this.config=b;this.activeIndex=b.activeIndex;if(!(this.activeIndex>-1))if(typeof b.switchTo!="number")this.activeIndex=0;this._init();this._initPlugins();this.fire(h);this.activeIndex>-1||typeof b.switchTo=="number"&&this.switchTo(b.switchTo)}
function x(a){var b={};b.type=a.originalEvent.type;b.target=a.originalEvent.target||a.originalEvent.srcElement;return{originalEvent:b}}var u=j.makeArray;v=v.Target;var h="init",t="removed";i.getDomEvent=x;i.Config={markupType:0,navCls:"ks-switchable-nav",contentCls:"ks-switchable-content",triggerCls:"ks-switchable-trigger",panelCls:"ks-switchable-panel",triggers:[],panels:[],hasTriggers:true,triggerType:"mouse",delay:0.1,activeIndex:-1,activeTriggerCls:"ks-active",steps:1,viewSize:[]};i.Plugins=[];
j.augment(i,v,{_initPlugins:function(){for(var a=this,b=a.constructor;b;){j.each(b.Plugins,function(c){c.init&&c.init(a)});b=b.superclass?b.superclass.constructor:null}},_init:function(){var a=this.config;this._parseMarkup();a.hasTriggers&&this._bindTriggers();this._bindPanels()},_parseMarkup:function(){var a=this.container,b=this.config,c,d,g=[],w=[];switch(b.markupType){case 0:if(c=e.get("."+b.navCls,a))g=e.children(c);d=e.get("."+b.contentCls,a);w=e.children(d);break;case 1:g=e.query("."+b.triggerCls,
a);w=e.query("."+b.panelCls,a);break;case 2:g=b.triggers;w=b.panels}this.length=Math.ceil(w.length/b.steps);this.nav=c||b.hasTriggers&&g[0]&&g[0].parentNode;if(b.hasTriggers&&(!this.nav||g.length==0))g=this._generateTriggersMarkup(this.length);this.triggers=u(g);this.panels=u(w);this.content=d||w[0].parentNode},_generateTriggersMarkup:function(a){var b=this.config,c=this.nav||e.create("<ul>"),d,g;c.className=b.navCls;for(g=0;g<a;g++){d=e.create("<li>");if(g===this.activeIndex)d.className=b.activeTriggerCls;
d.innerHTML=g+1;c.appendChild(d)}this.container.appendChild(c);this.nav=c;return e.children(c)},_bindTriggers:function(){var a=this,b=a.config,c=j.one(a.nav);j.each(a.triggers,function(d){a._initTrigger(d)});c.delegate("click",".ks-switchable-trigger-internal",function(d){var g=a._getTriggerIndex(d.currentTarget);a._onFocusTrigger(g,d)});b.triggerType==="mouse"&&c.delegate("mouseenter",".ks-switchable-trigger-internal",function(d){var g=a._getTriggerIndex(d.currentTarget);a._onMouseEnterTrigger(g,
d)}).delegate("mouseleave",".ks-switchable-trigger-internal",function(){a._onMouseLeaveTrigger()})},_initTrigger:function(a){e.addClass(a,"ks-switchable-trigger-internal")},_bindPanels:function(){var a=this;j.each(a.panels,function(b){a._initPanel(b)})},_initPanel:function(a){e.addClass(a,"ks-switchable-panel-internal")},_onFocusTrigger:function(a,b){if(this._triggerIsValid(a)){this._cancelSwitchTimer();this.switchTo(a,s,x(b))}},_onMouseEnterTrigger:function(a,b){var c=this;if(c._triggerIsValid(a)){var d=
x(b);c.switchTimer=j.later(function(){c.switchTo(a,s,d)},c.config.delay*1E3)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(a){return this.activeIndex!==a},_cancelSwitchTimer:function(){if(this.switchTimer){this.switchTimer.cancel();this.switchTimer=s}},_getTriggerIndex:function(a){return j.indexOf(a,this.triggers)},_resetLength:function(){this.length=this._getLength()},_getLength:function(a){var b=this.config;if(a===s)a=this.panels.length;return Math.ceil(a/
b.steps)},_afterAdd:function(a,b){this._resetLength();var c=this._getLength(a+1)-1;if(this.config.steps==1)if(this.activeIndex>=c)this.activeIndex+=1;var d=this.activeIndex;this.activeIndex=-1;this.switchTo(d);b&&this.switchTo(c)},add:function(a){var b=this.nav,c=this.content,d=a.trigger,g=a.panel,w=a.activated,p=this.panels.length;a=a.index!=null?a.index:p;var q=this.triggers,o=this.panels,z=this.length,n=null;n=null;a=Math.max(0,Math.min(a,p));p=o[a];o.splice(a,0,g);p?e.insertBefore(g,p):e.append(g,
c);if(this.config.steps==1){(n=q[a])?e.insertBefore(d,n):e.append(d,b);q.splice(a,0,d)}else{n=this._getLength();if(n!=z){e.append(d,b);q.push(d)}}this._initPanel(g);this._initTrigger(d);this.fire("added",{index:a,trigger:d,panel:g});this._afterAdd(a,w)},remove:function(a){function b(){if(z){e.remove(z);w.splice(a,1)}if(o){e.remove(o);d==1?c.triggers.splice(a,1):c.triggers.splice(g-1,1)}c._resetLength();c.fire(t,{index:a,trigger:o,panel:z})}var c=this,d=c.config.steps,g=c.length,w=c.panels,p=c._getLength(w.length-
1),q=c.triggers,o=null,z=null;a=j.isNumber(a)?Math.max(0,Math.min(a,w.length-1)):j.indexOf(a,w);o=d==1?q[a]:p!==g?q[g-1]:null;z=w[a];if(c.fire("beforeRemove",{index:a,panel:z,trigger:o})!==false)if(p==0)b();else{q=c.activeIndex;if(d!=1)if(q>=p)c.switchTo(p-1,s,s,b);else{b();c.activeIndex=-1;c.switchTo(q)}else c.switchTo(q>0?q-1:q+1,s,s,b)}},switchTo:function(a,b,c,d){var g=this,w=g.config,p=g.triggers,q=g.panels,o=g.activeIndex,z=w.steps,n=o*z,B=a*z;if(!g._triggerIsValid(a))return g;if(g.fire("beforeSwitch",
{fromIndex:o,toIndex:a})===false)return g;if(w.hasTriggers)g._switchTrigger(o>-1?p[o]:null,p[a]);if(b===s)b=a>o?"forward":"backward";g.activeIndex=a;g._switchView(o>-1?q.slice(n,n+z):null,q.slice(B,B+z),o,a,b,c,function(){d&&d.call(g,a)});return g},_switchTrigger:function(a,b){var c=this.config.activeTriggerCls;a&&e.removeClass(a,c);e.addClass(b,c)},_switchView:function(a,b,c,d,g,w,p){var q=this;a&&e.css(a,"display","none");e.css(b,"display","block");setTimeout(function(){q._fireOnSwitch(c,d,w)},
0);p&&p.call(this)},_fireOnSwitch:function(a,b,c){this.fire("switch",j.mix(c||{},{fromIndex:a,currentIndex:b}))},prev:function(a){var b=this.activeIndex;this.switchTo(b>0?b-1:this.length-1,"backward",a)},next:function(a){var b=this.activeIndex;this.switchTo(b<this.length-1?b+1:0,"forward",a)},destroy:function(){for(var a=this,b=a.constructor;b;){j.each(b.Plugins,function(c){c.destroy&&c.destroy(a)});b=b.superclass?b.superclass.constructor:null}e.remove(a.container);a.nav=null;a.content=null;a.container=
null;a.triggers=[];a.panels=[];a.detach()}});return i},{requires:["dom","event"]});
KISSY.add("switchable/carousel/aria",function(j,e,v,s,i){function x(f){var l=f.currentIndex,r=this.activeIndex,y=this.panels,E=y[l*this.config.steps],k=this.triggers;l=k[l];if((f=!!(f.originalEvent.target||f.originalEvent.srcElement))||r==-1){j.each(k,function(m){o(m,-1)});j.each(y,function(m){o(m,-1)});l&&o(l,0);o(E,0);f&&E.focus()}}function u(f){var l=null;j.each(this.triggers,function(r){if(r==f||e.contains(r,f)){l=r;return false}});return l}function h(f){var l=f.target;switch(f.keyCode){case w:case g:if(l=
u.call(this,l)){l=l;var r=e.next(l),y=this.triggers;r||(r=y[0]);o(l,-1);if(r){o(r,0);r.focus()}f.halt()}break;case d:case c:if(l=u.call(this,l)){l=l;r=e.prev(l);y=this.triggers;r||(r=y[y.length-1]);o(l,-1);if(r){o(r,0);r.focus()}f.halt()}break;case q:case p:if(l=u.call(this,l)){this.switchTo(j.indexOf(l,this.triggers),undefined,z);f.halt()}}}function t(f){var l=null;j.each(this.panels,function(r){if(r==f||e.contains(r,f)){l=r;return false}});return l}function a(f,l){var r=j.indexOf(f,this.panels),
y=this.config.steps,E=Math.floor(r/y);if(E==this.activeIndex)return 1;if(r%y==0||r%y==y-1){this.switchTo(E,l,z);return 0}return 1}function b(f){var l=f.target;switch(f.keyCode){case w:case g:if(l=t.call(this,l)){l=l;var r=e.next(l),y=this.panels;r||(r=y[0]);o(l,-1);o(r,0);a.call(this,r,n)&&r.focus();f.halt()}break;case d:case c:if(l=t.call(this,l)){l=l;r=e.prev(l);y=this.panels;r||(r=y[y.length-1]);o(l,-1);o(r,0);a.call(this,r,B)&&r.focus();f.halt()}break;case q:case p:if(l=t.call(this,l)){this.fire("itemSelected",
{item:l});f.halt()}}}var c=37,d=38,g=39,w=40,p=32,q=13,o=s.setTabIndex,z={originalEvent:{target:1}},n="forward",B="backward";j.mix(i.Config,{aria:false});i.Plugins.push({name:"aria",init:function(f){if(f.config.aria){var l=f.triggers,r=f.panels,y=f.content,E=f.activeIndex;if(!y.id)y.id=j.guid("ks-switchbale-content");y.setAttribute("role","listbox");var k=0;j.each(l,function(m){o(m,E==k?"0":"-1");m.setAttribute("role","button");m.setAttribute("aria-controls",y.id);k++});k=0;j.each(r,function(m){o(m,
"-1");m.setAttribute("role","option");k++});f.on("switch",x,f);(l=f.nav)&&v.on(l,"keydown",h,f);v.on(y,"keydown",b,f);l=f.prevBtn;r=f.nextBtn;if(l){o(l,0);l.setAttribute("role","button");v.on(l,"keydown",function(m){if(m.keyCode==q||m.keyCode==p){f.prev(z);m.preventDefault()}})}if(r){o(r,0);r.setAttribute("role","button");v.on(r,"keydown",function(m){if(m.keyCode==q||m.keyCode==p){f.next(z);m.preventDefault()}})}}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/carousel/base",function(j,e,v,s){function i(t,a){if(!(this instanceof i))return new i(t,a);i.superclass.constructor.apply(this,arguments)}var x="prevBtn",u="nextBtn",h={originalEvent:{target:1}};i.Config={circular:true,prevBtnCls:"ks-switchable-prev-btn",nextBtnCls:"ks-switchable-next-btn",disableBtnCls:"ks-switchable-disable-btn"};i.Plugins=[];j.extend(i,s,{_init:function(){function t(d){e.removeClass([a[x],a[u]],c);d==0&&e.addClass(a[x],c);d==a.length-1&&e.addClass(a[u],c)}
var a=this;i.superclass._init.call(a);var b=a.config,c=b.disableBtnCls;j.each(["prev","next"],function(d){var g=a[d+"Btn"]=e.get("."+b[d+"BtnCls"],a.container);v.on(g,"mousedown",function(w){w.preventDefault();w=a.activeIndex;if(d=="prev"&&(w!=0||b.circular))a[d](h);if(d=="next"&&(w!=a.length-1||b.circular))a[d](h)})});if(!b.circular){a.on("added removed",function(){t(a.activeIndex)});a.on("switch",function(d){t(d.currentIndex)})}v.delegate(a.content,"click",".ks-switchable-panel-internal",function(d){a.fire("itemSelected",
{item:d.currentTarget})})}});return i},{requires:["dom","event","../base"]});
KISSY.add("switchable/circular",function(j,e,v,s){function i(p,q,o,z,n,B){var f=this;q=f.config;var l=f.length,r=q.scrollType===w,y=r?a:b,E=f.viewSize[r?0:1];r=-E*n;var k=f.panels,m={},A,C=B===g;A=C&&z===0&&n===l-1||!C&&z===l-1&&n===0;if(f.anim){f.anim.stop();u.call(f,k,1,y,E);u.call(f,k,0,y,E)}if(A)r=x.call(f,k,C,y,E);m[y]=r+d;if(p)f.anim=(new v(f.content,m,q.duration,q.easing,function(){A&&u.call(f,k,C,y,E,1);f.anim=undefined;o&&o()})).run();else{e.css(f.content,m);o&&o()}}function x(p,q,o,z){var n=
this.config.steps,B=this.length,f=q?B-1:0;p=p.slice(f*n,(f+1)*n);e.css(p,h,t);e.css(p,o,(q?-1:1)*z*B);return q?z:-z*B}function u(p,q,o,z,n){var B=this.config.steps,f=this.length,l=q?f-1:0;p=p.slice(l*B,(l+1)*B);e.css(p,h,c);e.css(p,o,c);if(n)e.css(this.content,o,q?-z*(f-1):c)}var h="position",t="relative",a="left",b="top",c="",d="px",g="backward",w="scrollx";j.mix(s.Config,{circular:false});s.adjustPosition=x;s.resetPosition=u;s.Plugins.push({name:"circular",init:function(p){p=p.config;if(p.circular&&
(p.effect===w||p.effect==="scrolly")){p.scrollType=p.effect;p.effect=i}}})},{requires:["dom","anim","./base","./effect"]});
KISSY.add("switchable/countdown",function(j,e,v,s,i,x){j.mix(i.Config,{countdown:false,countdownFromStyle:"",countdownToStyle:"width: 0"});i.Plugins.push({name:"countdown",init:function(u){function h(q){t();p=(new s(d[q],w,c-1)).run()}function t(){if(b){clearTimeout(b);b=null}if(p){p.stop();p=x}}var a=u.config,b,c=a.interval,d=[],g=a.countdownFromStyle,w=a.countdownToStyle,p;if(!(!a.autoplay||!a.hasTriggers||!a.countdown)){j.each(u.triggers,function(q,o){q.innerHTML='<div class="ks-switchable-trigger-mask"></div><div class="ks-switchable-trigger-content">'+
q.innerHTML+"</div>";d[o]=q.firstChild});if(a.pauseOnHover){v.on(u.container,"mouseenter",function(){t();var q=d[u.activeIndex];if(g)p=(new s(q,g,0.2,"easeOut")).run();else e.attr(q,"style","")});v.on(u.container,"mouseleave",function(){t();var q=u.activeIndex;e.attr(d[q],"style",g);b=setTimeout(function(){h(q)},200)})}u.on("beforeSwitch",function(){t();if(d[u.activeIndex])e.attr(d[u.activeIndex],"style",g||"")});u.on("switch",function(q){u.paused||h(q.currentIndex)});u.activeIndex>-1&&h(u.activeIndex)}}});
return i},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/effect",function(j,e,v,s,i,x){var u;j.mix(i.Config,{effect:"none",duration:0.5,easing:"easeNone"});i.Effects={none:function(h,t,a){h&&e.css(h,"display","none");e.css(t,"display","block");a&&a()},fade:function(h,t,a){var b=this,c=b.config,d=h?h[0]:null,g=t[0];if(b.anim){b.anim.stop();e.css(b.anim.fromEl,{zIndex:1,opacity:0});e.css(b.anim.toEl,"zIndex",9)}e.css(g,"opacity",1);if(d){b.anim=(new s(d,{opacity:0},c.duration,c.easing,function(){b.anim=x;e.css(g,"z-index",9);e.css(d,
"z-index",1);a&&a()})).run();b.anim.toEl=g;b.anim.fromEl=d}else{e.css(g,"z-index",9);a&&a()}},scroll:function(h,t,a,b,c){var d=this;t=d.config;b=t.effect==="scrollx";var g={};g[b?"left":"top"]=-(d.viewSize[b?0:1]*c)+"px";d.anim&&d.anim.stop();if(h)d.anim=(new s(d.content,g,t.duration,t.easing,function(){d.anim=x;a&&a()})).run();else{e.css(d.content,g);a&&a()}}};u=i.Effects;u.scrollx=u.scrolly=u.scroll;i.Plugins.push({name:"effect",init:function(h){var t=h.config,a=t.effect,b=h.panels,c=h.content,
d=t.steps,g=b[0],w=h.activeIndex;h.viewSize=[t.viewSize[0]||g&&g.offsetWidth*d,t.viewSize[1]||g&&g.offsetHeight*d];if(a!=="none"){e.css(b,"display","block");switch(a){case "scrollx":case "scrolly":e.css(c,"position","absolute");e.css(c.parentNode,"position")=="static"&&e.css(c.parentNode,"position","relative");if(a==="scrollx"){e.css(b,"float","left");e.width(c,"9999px")}break;case "fade":var p=w*d,q=p+d-1,o;j.each(b,function(z,n){o=n>=p&&n<=q;e.css(z,{opacity:o?1:0,position:"absolute",zIndex:o?9:
1})})}}}});j.augment(i,{_switchView:function(h,t,a,b,c,d,g){var w=this,p=w.config.effect;(j.isFunction(p)?p:u[p]).call(w,h,t,function(){w._fireOnSwitch(a,b,d);g&&g.call(w)},a,b,c)}});return i},{requires:["dom","event","anim","./base"]});
KISSY.add("switchable/lazyload",function(j,e,v){var s="beforeSwitch",i="img",x="textarea",u={};u[i]="lazyImgAttribute";u[x]="lazyTextareaClass";j.mix(v.Config,{lazyImgAttribute:"data-ks-lazyload-custom",lazyTextareaClass:"ks-datalazyload-custom",lazyDataType:x});v.Plugins.push({name:"lazyload",init:function(h){function t(g){var w=b.steps;g=g.toIndex*w;a.loadCustomLazyData(h.panels.slice(g,g+w),c,d);a:{var p,q,o;if(g=(w=c===i)?"img":c===x?"textarea":""){g=e.query(g,h.container);p=0;for(o=g.length;p<
o;p++){q=g[p];if(w?e.attr(q,d):e.hasClass(q,d)){w=false;break a}}}w=true}w&&h.detach(s,t)}var a=j.require("datalazyload"),b=h.config,c,d;if(b.lazyDataType==="img-src")b.lazyDataType=i;if(b.lazyDataType==="area-data")b.lazyDataType=x;c=b.lazyDataType;d=b[u[c]];!a||!c||!d||h.on(s,t)}});return v},{requires:["dom","./base"]});
KISSY.add("switchable/slide/aria",function(j,e,v,s,i){function x(d){switch(d.keyCode){case a:case t:this.next(b);d.halt();break;case h:case u:this.prev(b);d.halt()}}var u=37,h=38,t=39,a=40;j.mix(i.Config,{aria:false});var b={originalEvent:{target:1}},c=s.setTabIndex;i.Plugins.push({name:"aria",init:function(d){if(d.config.aria){var g=d.panels,w=0,p=d.activeIndex;j.each(d.triggers,function(o){c(o,"-1");w++});w=0;j.each(g,function(o){c(o,p==w?"0":"-1");e.attr(o,"role","option");w++});var q=d.content;
e.attr(q,"role","listbox");v.on(q,"keydown",x,d);c(g[0],0);d.on("switch",function(o){var z=o.currentIndex,n=!!(o.originalEvent.target||o.originalEvent.srcElement);o=o.fromIndex;o>-1&&c(g[o],-1);c(g[z],0);n&&g[z].focus()})}}})},{requires:["dom","event","../aria","./base"]});
KISSY.add("switchable/slide/base",function(j,e){function v(s,i){if(!(this instanceof v))return new v(s,i);v.superclass.constructor.apply(this,arguments)}v.Config={autoplay:true,circular:true};v.Plugins=[];j.extend(v,e);return v},{requires:["../base"]});
KISSY.add("switchable",function(j,e,v,s,i,x,u,h,t,a,b,c,d,g,w,p){j.mix(e,{Accordion:s,Carousel:h,Slide:g,Tabs:p});return e},{requires:["switchable/base","switchable/aria","switchable/accordion/base","switchable/accordion/aria","switchable/autoplay","switchable/autorender","switchable/carousel/base","switchable/carousel/aria","switchable/circular","switchable/countdown","switchable/effect","switchable/lazyload","switchable/slide/base","switchable/slide/aria","switchable/tabs/base","switchable/tabs/aria"]});
KISSY.add("switchable/tabs/aria",function(j,e,v,s,i,x){function u(n){var B=null;j.each(this.triggers,function(f){if(f==n||e.contains(f,n))B=f});return B}function h(n){switch(n.keyCode){case b:case c:n.ctrlKey&&!n.altKey&&!n.shiftKey&&n.halt();break;case q:n.ctrlKey&&!n.altKey&&n.halt()}}function t(n){var B=n.target,f=n.ctrlKey&&!n.shiftKey&&!n.altKey;switch(n.keyCode){case d:case g:if(u.call(this,B)){this.prev(z(n));n.halt()}break;case w:case p:if(u.call(this,B)){this.next(z(n));n.halt()}break;case c:if(f){n.halt();
this.next(z(n))}break;case b:if(f){n.halt();this.prev(z(n))}break;case q:if(n.ctrlKey&&!n.altKey){n.halt();n.shiftKey?this.prev(z(n)):this.next(z(n))}}}function a(n){var B=!!(n.originalEvent.target||n.originalEvent.srcElement),f=n.fromIndex,l=n.currentIndex;if(f!=l){n=this.triggers[f];var r=this.triggers[l];f=this.panels[f];l=this.panels[l];n&&o(n,"-1");o(r,"0");B&&r.focus();f&&f.setAttribute("aria-hidden","true");l.setAttribute("aria-hidden","false")}}var b=33,c=34,d=37,g=38,w=39,p=40,q=9;j.mix(x.Config,
{aria:true});x.Plugins.push({name:"aria",init:function(n){function B(m){m.setAttribute("role","tab");o(m,"-1");if(!m.id)m.id=j.guid("ks-switchable")}function f(m,A){m.setAttribute("role","tabpanel");m.setAttribute("aria-hidden","true");m.setAttribute("aria-labelledby",A.id)}if(n.config.aria){var l=n.triggers,r=n.activeIndex,y=n.panels,E=n.container;n.nav&&e.attr(n.nav,"role","tablist");var k=0;j.each(l,B);n.on("added",function(m){var A;B(A=m.trigger);f(m.panel,A)});k=0;j.each(y,function(m){f(m,l[k]);
k++});if(r>-1){o(l[r],"0");y[r].setAttribute("aria-hidden","false")}n.on("switch",a,n);v.on(E,"keydown",t,n);v.on(E,"keypress",h,n)}}});var o=i.setTabIndex,z=s.getDomEvent},{requires:["dom","event","../base","../aria","./base"]});KISSY.add("switchable/tabs/base",function(j,e){function v(s,i){if(!(this instanceof v))return new v(s,i);v.superclass.constructor.call(this,s,i);return 0}j.extend(v,e);v.Config={};v.Plugins=[];return v},{requires:["../base"]});
KISSY.add("switchable/touch",function(j,e,v,s){j.mix(s.Config,{mouseAsTouch:false});s.Plugins.push({name:"touch",init:function(i){var x=i.config,u=x.effect;if(u=="scrolly"||u=="scrollx"){var h=i.content,t=i.container,a,b=x.mouseAsTouch,c,d=0,g=0,w,p="left",q,o;if(u=="scrolly")p="top";var z=function(){if(i.panels[i.activeIndex].style.position!="relative"){i.stop&&i.stop();w=e.offset(h);g=1}},n=function(f){if(g){var l=f.type.indexOf("touch")!=-1?f.originalEvent.changedTouches[0]:f,r={},y=e.offset(t);
y.bottom=y.top+t.offsetHeight;y.right=y.left+t.offsetWidth;if(u=="scrolly"){o=i.viewSize[1];q=l.pageY-c;r.top=q+w.top;l=l.pageY>=y.top&&l.pageY<=y.bottom}else{o=i.viewSize[0];q=l.pageX-a;r.left=q+w.left;l=l.pageX>=y.left&&l.pageX<=y.right}if(Math.abs(q)>3){f.type.indexOf("touch")!=-1&&f.preventDefault();if(l){f=i.activeIndex;if(!d){d=1;if(x.circular)if(f==i.length-1)s.adjustPosition.call(i,i.panels,false,p,o);else f==0&&s.adjustPosition.call(i,i.panels,true,p,o)}if(x.circular)e.offset(h,r);else q>
0&&f==0||q<0&&f==i.length-1||e.offset(h,r)}else B()}}},B=function(){if(d){g=d=0;var f=i.activeIndex,l=i.length-1;if(q<0&&f==l){if(!x.circular)return}else if(q>0&&f==0){if(!x.circular)return}else if(f==0||f==l)s.resetPosition.call(i,i.panels,f==0,p,o);i[q<0?"next":"prev"]();i.start&&i.start()}};v.on(h,"touchstart",function(f){z();a=f.pageX;c=f.pageY});v.on(h,"touchmove",n);v.on(h,"touchend",B);b&&!("ontouchstart"in j.Env.host.document.documentElement)&&j.use("dd",function(f,l){var r=new l.Draggable({node:h});
r.on("dragstart",function(){z();a=r.startMousePos.left;c=r.startMousePos.top});r.on("drag",n);r.on("dragend",B);i.__touchDD=r})}},destroy:function(i){if(i=i.__touchDD)i.destroy()}})},{requires:["dom","event","./base"]});
