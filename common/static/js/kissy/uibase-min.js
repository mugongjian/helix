/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Apr 13 15:15
*/
KISSY.add("uibase/align",function(f,i,b,e){function l(j){for(var n=j.ownerDocument.body,d=b.css(j,"position"),a="fixed"==d||"absolute"==d,j=j.parentNode;j&&j!=n;j=j.parentNode)if(d=b.css(j,"position"),a=a&&"static"==d,"visible"!=b.css(j,"overflow")&&(!a||"fixed"==d||"absolute"==d||"relative"==d))return j;return null}function k(j){for(var a in j)if(0===a.indexOf("fail"))return!0;return!1}function a(j){var a=j.offset,d=j.node,c=j.points,e,g=this.get("el"),a=a||[0,0];e=g.offset();d=m(d,c[0]);c=m(g,c[1]);
c=[c.left-d.left,c.top-d.top];e={left:e.left-c[0]+ +a[0],top:e.top-c[1]+ +a[1]};a:{a=e;e=this.get("el");g={};c={width:e.outerWidth(),height:e.outerHeight()};d=f.clone(c);if(!f.isEmptyObject(j.overflow)){for(var g={left:0,right:Infinity,top:0,bottom:Infinity},h=e[0];h=l(h);){var q=h.clientWidth;if(!i.ie||0!==q){var q=h.clientLeft,s=h.clientTop,o=b.offset(h);o.left+=q;o.top+=s;g.top=Math.max(g.top,o.top);g.right=Math.min(g.right,o.left+h.clientWidth);g.bottom=Math.min(g.bottom,o.top+h.clientHeight);
g.left=Math.max(g.left,o.left)}}h=b.scrollLeft();q=b.scrollTop();g.left=Math.max(g.left,h);g.top=Math.max(g.top,q);g.right=Math.min(g.right,h+b.viewportWidth());g.bottom=Math.min(g.bottom,q+b.viewportHeight());g=0<=g.top&&0<=g.left&&g.bottom>g.top&&g.right>g.left?g:null;j=j.overflow||{};h={};a.left<g.left&&j.adjustX&&(a.left=g.left,h.adjustX=1);a.left<g.left&&a.left+d.width>g.right&&j.resizeWidth&&(d.width-=a.left+d.width-g.right,h.resizeWidth=1);a.left+d.width>g.right&&j.adjustX&&(a.left=Math.max(g.right-
d.width,g.left),h.adjustX=1);j.failX&&(h.failX=a.left<g.left||a.left+d.width>g.right);a.top<g.top&&j.adjustY&&(a.top=g.top,h.adjustY=1);a.top>=g.top&&a.top+d.height>g.bottom&&j.resizeHeight&&(d.height-=a.top+d.height-g.bottom,h.resizeHeight=1);a.top+d.height>g.bottom&&j.adjustY&&(a.top=Math.max(g.bottom-d.height,g.top),h.adjustY=1);j.failY&&(h.failY=a.top<g.top||a.top+d.height>g.bottom);g=h;if(k(g)){j=g;break a}}this.set("x",a.left);this.set("y",a.top);if(d.width!=c.width||d.height!=c.height)e.width(d.width),
e.height(d.height);j=g}return j}function c(a,b,d){var c=[];f.each(a,function(a){c.push(a.replace(b,function(a){return d[a]}))});return c}function h(){}function m(a,c){var d=c.charAt(0),e=c.charAt(1),h,g,k,m;a&&!f.isWindow(a)?(h=a.offset(),g=a.outerWidth(),k=a.outerHeight()):(h={left:b.scrollLeft(),top:b.scrollTop()},g=b.viewportWidth(),k=b.viewportHeight());m=h.left;h=h.top;"c"===d?h+=k/2:"b"===d&&(h+=k);"c"===e?m+=g/2:"r"===e&&(m+=g);return{left:m,top:h}}h.ATTRS={align:{setter:function(a){var c;
if(c=a.node)a.node=e.one(c)}}};h.prototype={_uiSetAlign:function(a){a&&this.align(a.node,a.points,a.offset,a.overflow)},align:function(j,b,d,h){var m={};j&&(j=e.one(j));h=f.clone(h||{});d=d&&[].concat(d)||[0,0];h.failX&&(m.failX=1);h.failY&&(m.failY=1);var g=a.call(this,{node:j,points:b,offset:d,overflow:m});if(k(g)&&(g.failX&&(b=c(b,/[lr]/ig,{l:"r",r:"l"}),d[0]=-d[0]),g.failY))b=c(b,/[tb]/ig,{t:"b",b:"t"}),g=d,g[1]=-g[1],d=g;g=a.call(this,{node:j,points:b,offset:d,overflow:m});k(g)&&(delete h.failX,
delete h.failY,a.call(this,{node:j,points:b,offset:d,overflow:h}))},center:function(a){this.set("align",{node:a,points:["cc","cc"],offset:[0,0]})}};return h},{requires:["ua","dom","node"]});
KISSY.add("uibase/base",function(f,i,b,e){function l(a){return a.charAt(0).toUpperCase()+a.substring(1)}function k(h){i.apply(this,arguments);for(var j=h,e=this.constructor;e;){if(j&&j[c]&&e.HTML_PARSER&&(j[c]=b.one(j[c]))){var d=j[c],k=e.HTML_PARSER,p=void 0,g=void 0;for(p in k)k.hasOwnProperty(p)&&(g=k[p],f.isFunction(g)?this.__set(p,g.call(this,d)):f.isString(g)?this.__set(p,d.one(g)):f.isArray(g)&&g[0]&&this.__set(p,d.all(g[0])))}e=e.superclass&&e.superclass.constructor}a(this,"initializer","constructor");
h&&h.autoRender&&this.render()}function a(a,b,h){for(var d=a.constructor,c=[],e,g,k,f;d;){f=[];if(k=d.__ks_exts)for(var i=0;i<k.length;i++)if(e=k[i])"constructor"!=h&&(e=e.prototype.hasOwnProperty(h)?e.prototype[h]:null),e&&f.push(e);d.prototype.hasOwnProperty(b)&&(g=d.prototype[b])&&f.push(g);f.length&&c.push.apply(c,f.reverse());d=d.superclass&&d.superclass.constructor}for(i=c.length-1;0<=i;i--)c[i]&&c[i].call(a)}var c="srcNode",h=f.noop;k.HTML_PARSER={};k.ATTRS={rendered:{value:!1},created:{value:!1}};
f.extend(k,i,{create:function(){this.get("created")||(this._createDom(),this.fire("createDom"),a(this,"createDom","__createDom"),this.fire("afterCreateDom"),this.__set("created",!0))},render:function(){this.get("rendered")||(this.create(),this._renderUI(),this.fire("renderUI"),a(this,"renderUI","__renderUI"),this.fire("afterRenderUI"),this._bindUI(),this.fire("bindUI"),a(this,"bindUI","__bindUI"),this.fire("afterBindUI"),this._syncUI(),this.fire("syncUI"),a(this,"syncUI","__syncUI"),this.fire("afterSyncUI"),
this.__set("rendered",!0));return this},_createDom:h,_renderUI:h,renderUI:h,_bindUI:function(){var a=this,b=a.__attrs,c,d;for(c in b)b.hasOwnProperty(c)&&(d="_uiSet"+l(c),a[d]&&function(d,c){a.on("after"+l(d)+"Change",function(d){a[c](d.newVal,d)})}(c,d))},bindUI:h,_syncUI:function(){var a,c,b=this.__attrs,d;for(d in b)b.hasOwnProperty(d)&&(c=this["_uiSet"+l(d)])&&!1!==b[d].sync&&(a=this.get(d))!==e&&c.call(this,a)},syncUI:h,destroy:function(){for(var a=this.constructor,c,b,d;a;){a.prototype.hasOwnProperty("destructor")&&
a.prototype.destructor.apply(this);if(c=a.__ks_exts)for(d=c.length-1;0<=d;d--)(b=c[d]&&c[d].prototype.__destructor)&&b.apply(this);a=a.superclass&&a.superclass.constructor}this.fire("destroy");this.detach()}},{create:function(a,c,b,d){function h(){k.apply(this,arguments)}var i=f.makeArray(arguments);f.isArray(a)&&(d=b,b=c,c=a,a=k);a=a||k;f.isObject(c)&&(d=b,b=c,c=[]);f.isString(i[i.length-1]);f.extend(h,a,b,d);if(c){h.__ks_exts=c;var g={},i=c.concat(h);f.each(i,function(a){a&&f.each(["ATTRS","HTML_PARSER"],
function(c){if(a[c]){g[c]=g[c]||{};f.mix(g[c],a[c],true,e,true)}})});f.each(g,function(a,c){h[c]=a});var l={};f.each(i,function(a){if(a){var a=a.prototype,c;for(c in a)a.hasOwnProperty(c)&&(l[c]=a[c])}});f.each(l,function(a,c){h.prototype[c]=a})}return h}});return k},{requires:["base","node"]});
KISSY.add("uibase/box",function(f){function i(){}i.ATTRS={html:{view:!0},width:{view:!0},height:{view:!0},elCls:{view:!0},elStyle:{view:!0},elAttrs:{view:!0},elBefore:{view:!0},el:{view:!0},render:{view:!0},visibleMode:{value:"display",view:!0},visible:{view:!0},srcNode:{view:!0}};i.HTML_PARSER={el:function(b){this.decorateInternal&&this.decorateInternal(f.one(b));return b}};i.prototype={_uiSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.get("rendered")?this.set("visible",
!0):(this.set("visible",!0),this.render())},hide:function(){this.set("visible",!1)}};return i});
KISSY.add("uibase/boxrender",function(f,i){function b(){}function e(a,c,b,e,k,f,d){c=c||{};d=d||"";"string"!==typeof d&&(d="");b&&(c.width="number"==typeof b?b+"px":b);e&&(c.height="number"==typeof e?e+"px":e);var b="",i;for(i in c)c.hasOwnProperty(i)&&(b+=i+":"+c[i]+";");var c="",l;for(l in f)f.hasOwnProperty(l)&&(c+=" "+l+"='"+f[l]+"' ");return"<"+k+(b?" style='"+b+"' ":"")+c+(a?" class='"+a+"' ":"")+">"+d+"</"+k+">"}var l=f.all,k=f.Env.host.document;b.ATTRS={el:{setter:function(a){return l(a)}},
elCls:{sync:!1},elStyle:{sync:!1},width:{sync:!1},height:{sync:!1},elTagName:{sync:!1,value:"div"},elAttrs:{sync:!1},html:{sync:!1},elBefore:{},render:{},visible:{},visibleMode:{}};b.construct=e;b.HTML_PARSER={html:function(a){return a.html()}};b.prototype={__renderUI:function(){if(this.__boxRenderNew){var a=this.get("render"),c=this.get("el"),b=this.get("elBefore");b?c.insertBefore(b):a?c.appendTo(a):c.appendTo(k.body)}},__createDom:function(){var a=this.get("elCls"),c=this.get("elStyle"),b=this.get("width"),
k=this.get("height"),f=this.get("html"),l=this.get("elAttrs"),d=this.get("el");d?(a&&d.addClass(a),c&&d.css(c),void 0!==b&&d.width(b),void 0!==k&&d.height(k),l&&d.attr(l)):(this.__boxRenderNew=!0,d=new i(e(a,c,b,k,this.get("elTagName"),l,f)),this.__set("el",d))},_uiSetElAttrs:function(a){this.get("el").attr(a)},_uiSetElCls:function(a){this.get("el").addClass(a)},_uiSetElStyle:function(a){this.get("el").css(a)},_uiSetWidth:function(a){this.get("el").width(a)},_uiSetHeight:function(a){this.get("el").height(a)},
_uiSetHtml:function(a){this.get("el").html(a)},_uiSetVisible:function(a){var c=this.get("el");"visibility"==this.get("visibleMode")?c.css("visibility",a?"visible":"hidden"):c.css("display",a?"":"none")},__destructor:function(){var a=this.get("el");a&&a.remove()}};return b},{requires:["node"]});
KISSY.add("uibase/close",function(){function f(){}f.ATTRS={closable:{view:!0},closeAction:{value:"hide"}};var i={hide:"hide",destroy:"destroy"};f.prototype={__bindUI:function(){var b=this,e=b.get("view").get("closeBtn");e&&e.on("click",function(e){b[i[b.get("closeAction")]||"hide"]();e.preventDefault()})}};return f});
KISSY.add("uibase/closerender",function(f,i){function b(){}b.ATTRS={closable:{value:!0,sync:!1},closeBtn:{}};b.HTML_PARSER={closeBtn:function(b){return b.one("."+this.get("prefixCls")+"ext-close")}};b.prototype={_uiSetClosable:function(b){this.get("closeBtn")[b?"show":"hide"]()},__createDom:function(){var b=this.get("closeBtn"),f=this.get("closable"),k=this.get("el");if(b)b[f?"show":"hide"]();else b=(new i("<a tabindex='0' "+(f?"":"style='display:none'")+"href='javascript:void(\"\u5173\u95ed\")' role='button' class='"+
this.get("prefixCls")+"ext-close'><span class='"+this.get("prefixCls")+"ext-close-x'>\u5173\u95ed</span></a>")).appendTo(k),this.__set("closeBtn",b)},__destructor:function(){var b=this.get("closeBtn");b&&b.detach()}};return b},{requires:["node"]});
KISSY.add("uibase/constrain",function(f,i,b){function e(){}function l(e){var a;if(!e)return a;var c=this.get("el");!0!==e?(e=b.one(e),a=e.offset(),f.mix(a,{maxLeft:a.left+e.outerWidth()-c.outerWidth(),maxTop:a.top+e.outerHeight()-c.outerHeight()})):(e=f.Env.host.document.documentElement.clientWidth,a={left:i.scrollLeft(),top:i.scrollTop()},f.mix(a,{maxLeft:a.left+e-c.outerWidth(),maxTop:a.top+i.viewportHeight()-c.outerHeight()}));return a}e.ATTRS={constrain:{value:!1}};e.prototype={__renderUI:function(){var b=
this,a=b.getAttrs(),c=a.x,a=a.y,e=c.setter,f=a.setter;c.setter=function(a){var c=e&&e.call(b,a);void 0===c&&(c=a);if(!b.get("constrain"))return c;a=l.call(b,b.get("constrain"));return Math.min(Math.max(c,a.left),a.maxLeft)};a.setter=function(a){var c=f&&f.call(b,a);void 0===c&&(c=a);if(!b.get("constrain"))return c;a=l.call(b,b.get("constrain"));return Math.min(Math.max(c,a.top),a.maxTop)};b.addAttr("x",c);b.addAttr("y",a)}};return e},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(){function f(){}f.ATTRS={content:{view:!0,sync:!1},contentEl:{view:!0},contentElAttrs:{view:!0},contentElStyle:{view:!0},contentTagName:{view:!0}};return f});
KISSY.add("uibase/contentboxrender",function(f,i,b){function e(){}e.ATTRS={contentEl:{},contentElAttrs:{},contentElCls:{},contentElStyle:{},contentTagName:{value:"div"},content:{sync:!1}};e.HTML_PARSER={content:function(b){return b[0].innerHTML}};var l=b.construct;e.prototype={__renderUI:function(){},__createDom:function(){var b,a=this.get("content"),c=this.get("el");b="";var e=f.makeArray(c[0].childNodes);e.length&&(b=c[0].innerHTML);a==b&&(a="");b=new i(l(this.get("prefixCls")+"contentbox "+(this.get("contentElCls")||
""),this.get("contentElStyle"),void 0,void 0,this.get("contentTagName"),this.get("contentElAttrs"),a));b.appendTo(c);this.__set("contentEl",b);if(a)"string"!==typeof a&&b.append(a);else{a=0;for(c=e.length;a<c;a++)b.append(e[a])}},_uiSetContentElCls:function(b){this.get("contentEl").addClass(b)},_uiSetContentElAttrs:function(b){this.get("contentEl").attr(b)},_uiSetContentElStyle:function(b){this.get("contentEl").css(b)},_uiSetContent:function(b){"string"==typeof b?this.get("contentEl").html(b):this.get("contentEl").empty().append(b)}};
return e},{requires:["node","./boxrender"]});
KISSY.add("uibase/drag",function(f){function i(){}i.ATTRS={handlers:{value:[]},draggable:{value:!0}};i.prototype={_uiSetHandlers:function(b){b&&0<b.length&&this.__drag&&this.__drag.set("handlers",b)},__bindUI:function(){var b=f.require("dd/draggable"),e=this.get("el");this.get("draggable")&&b&&(this.__drag=new b({node:e}))},_uiSetDraggable:function(b){var e=this.__drag;e&&(b?(e.detach("drag"),e.on("drag",this._dragExtAction,this)):e.detach("drag"))},_dragExtAction:function(b){this.set("xy",[b.left,
b.top])},__destructor:function(){var b=this.__drag;b&&b.destroy()}};return i});KISSY.add("uibase/loading",function(){function f(){}f.prototype={loading:function(){this.get("view").loading()},unloading:function(){this.get("view").unloading()}};return f});
KISSY.add("uibase/loadingrender",function(f,i){function b(){}b.prototype={loading:function(){this._loadingExtEl||(this._loadingExtEl=(new i("<div class='"+this.get("prefixCls")+"ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'/>")).appendTo(this.get("el")));this._loadingExtEl.show()},unloading:function(){var b=this._loadingExtEl;b&&b.hide()}};return b},{requires:["node"]});
KISSY.add("uibase/mask",function(){function f(){}f.ATTRS={mask:{value:!1}};f.prototype={_uiSetMask:function(f){f?(this.on("show",this.get("view")._maskExtShow,this.get("view")),this.on("hide",this.get("view")._maskExtHide,this.get("view"))):(this.detach("show",this.get("view")._maskExtShow,this.get("view")),this.detach("hide",this.get("view")._maskExtHide,this.get("view")))}};return f},{requires:["ua"]});
KISSY.add("uibase/maskrender",function(f,i,b){function e(){return h?"expression(KISSY.DOM.docWidth())":"100%"}function l(){return h?"expression(KISSY.DOM.docHeight())":"100%"}function k(){c=m("<div  style='width:"+e()+";height:"+l()+";' class='"+this.get("prefixCls")+"ext-mask'/>").prependTo(j.document.body);c.css({position:h?"absolute":"fixed",left:0,top:0});h&&(n=m("<iframe style='position:absolute;left:0px;top:0px;background:red;width:"+e()+";height:"+l()+";filter:alpha(opacity=0);z-index:-1;'/>").insertBefore(c));
c.unselectable();c.on("mousedown click",function(a){a.halt()})}function a(){}var c,h=6===i.ie,m=b.all,j=f.Env.host;m(j.document);var n,d=0;a.prototype={_maskExtShow:function(){c||k.call(this);var a={"z-index":this.get("zIndex")-1},b={display:""};c.css(a);n&&n.css(a);d++;1==d&&(c.css(b),n&&n.css(b))},_maskExtHide:function(){d--;0>=d&&(d=0);if(!d){var a={display:"none"};c&&c.css(a);n&&n.css(a)}},__destructor:function(){this._maskExtHide()}};return a},{requires:["ua","node"]});
KISSY.add("uibase/position",function(f){function i(){}i.ATTRS={x:{view:!0},y:{view:!0},xy:{setter:function(b){var e=f.makeArray(b);e.length&&(e[0]&&this.set("x",e[0]),e[1]&&this.set("y",e[1]));return b},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:!0}};i.prototype={move:function(b,e){f.isArray(b)&&(e=b[1],b=b[0]);this.set("xy",[b,e])}};return i});
KISSY.add("uibase/positionrender",function(){function f(){}f.ATTRS={x:{valueFn:function(){return this.get("el")&&this.get("el").offset().left}},y:{valueFn:function(){return this.get("el")&&this.get("el").offset().top}},zIndex:{value:9999}};f.prototype={__createDom:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_uiSetZIndex:function(f){this.get("el").css("z-index",f)},_uiSetX:function(f){this.get("el").offset({left:f})},_uiSetY:function(f){this.get("el").offset({top:f})}};
return f});KISSY.add("uibase/resize",function(f){function i(){}i.ATTRS={resize:{value:{}}};i.prototype={__destructor:function(){var b=this.resizer;b&&b.destroy()},_uiSetResize:function(b){var e=f.require("resizable");e&&(this.resizer&&this.resizer.destroy(),b.node=this.get("el"),b.handlers&&(this.resizer=new e(b)))}};return i});
KISSY.add("uibase/shimrender",function(f,i){function b(){}b.ATTRS={shim:{value:!0}};b.prototype={_uiSetShim:function(b){var f=this.get("el");b&&!this.__shimEl?(this.__shimEl=new i("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'/>"),f.prepend(this.__shimEl)):!b&&this.__shimEl&&(this.__shimEl.remove(),delete this.__shimEl)}};return b},{requires:["node"]});
KISSY.add("uibase/stdmod",function(){function f(){}f.ATTRS={header:{view:!0},body:{view:!0},footer:{view:!0},bodyStyle:{view:!0},footerStyle:{view:!0},headerStyle:{view:!0},headerContent:{view:!0},bodyContent:{view:!0},footerContent:{view:!0}};return f});
KISSY.add("uibase/stdmodrender",function(f,i){function b(){}function e(a,b){var e=a.get("contentEl"),l=a.get(b+"Style"),j=a.get(b+"Content"),n=f.isString(j),d=a.get(b);if(d)l&&d.css(l);else{d="";if(l)for(var r in l)l.hasOwnProperty(r)&&(d+=r+":"+l[r]+";");l=d;d=new i("<div class='"+a.get("prefixCls")+k+b+"' "+(l?"style='"+l+"'":"")+" >"+(n?j:"")+"</div>");n||d.append(j);d.appendTo(e);a.__set(b,d)}}function l(a,b,e){b=a.get(b);f.isString(e)?b.html(e):b.html("").append(e)}var k="stdmod-";b.ATTRS={header:{},
body:{},footer:{},bodyStyle:{sync:!1},footerStyle:{sync:!1},headerStyle:{sync:!1},headerContent:{sync:!1},bodyContent:{sync:!1},footerContent:{sync:!1}};b.HTML_PARSER={header:function(a){return a.one("."+this.get("prefixCls")+k+"header")},body:function(a){return a.one("."+this.get("prefixCls")+k+"body")},footer:function(a){return a.one("."+this.get("prefixCls")+k+"footer")}};b.prototype={__createDom:function(){e(this,"header");e(this,"body");e(this,"footer")},_uiSetBodyStyle:function(a){this.get("body").css(a)},
_uiSetHeaderStyle:function(a){this.get("header").css(a)},_uiSetFooterStyle:function(a){this.get("footer").css(a)},_uiSetBodyContent:function(a){l(this,"body",a)},_uiSetHeaderContent:function(a){l(this,"header",a)},_uiSetFooterContent:function(a){l(this,"footer",a)}};return b},{requires:["node"]});
KISSY.add("uibase",function(f,i,b,e,l,k,a,c,h,m,j,n,d,r,p,g,t,q,s,o,u){k.Render=a;n.Render=d;r.Render=p;g.Render=t;o.Render=u;e.Render=l;h.Render=m;f.mix(i,{Align:b,Box:e,Close:k,Constrain:c,ContentBox:h,Drag:j,Loading:n,Mask:r,Position:g,Shim:{Render:q},Resize:s,StdMod:o});return i},{requires:"uibase/base,uibase/align,uibase/box,uibase/boxrender,uibase/close,uibase/closerender,uibase/constrain,uibase/contentbox,uibase/contentboxrender,uibase/drag,uibase/loading,uibase/loadingrender,uibase/mask,uibase/maskrender,uibase/position,uibase/positionrender,uibase/shimrender,uibase/resize,uibase/stdmod,uibase/stdmodrender".split(",")});
